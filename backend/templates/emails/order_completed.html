{% extends "emails/base_email.html" %}

{% block title %}Â¡Pedido Completado! - AGAH Solutions{% endblock %}

{% block content %}
<!-- Success Icon -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="text-align: center; margin-bottom: 30px;">
    <tr>
        <td>
            <div style="display: inline-block; width: 80px; height: 80px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); border-radius: 50%; text-align: center; line-height: 80px;">
                <span style="font-size: 40px; color: white;">ðŸŽ‰</span>
            </div>
        </td>
    </tr>
</table>

<!-- Main Message -->
<h2 style="margin: 0 0 20px 0; color: #10B981; font-size: 32px; font-weight: 600; text-align: center;">
    Â¡Tu Pedido estÃ¡ Completado!
</h2>

<p style="margin: 0 0 30px 0; color: #F4E7E1; font-size: 16px; line-height: 1.6; text-align: center;">
    Hola {{ customer_name|default:"Cliente" }}, nos complace informarte que tu pedido ha sido completado exitosamente y estÃ¡ listo para entrega.
</p>

<!-- Order Summary -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%); border-radius: 10px; border: 2px solid #10B981; margin-bottom: 30px;">
    <tr>
        <td style="padding: 25px;">
            <h3 style="margin: 0 0 20px 0; color: #10B981; font-size: 20px; text-align: center;">
                Pedido: {{ order.order_number }}
            </h3>
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="padding: 10px 0; border-bottom: 1px solid rgba(16, 185, 129, 0.2);">
                        <span style="color: #888888; font-size: 14px;">Estado:</span>
                        <span style="color: #10B981; font-size: 16px; font-weight: 600; float: right;">COMPLETADO âœ“</span>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 10px 0; border-bottom: 1px solid rgba(16, 185, 129, 0.2);">
                        <span style="color: #888888; font-size: 14px;">Fecha de Completado:</span>
                        <span style="color: #F4E7E1; font-size: 14px; float: right;">{{ order.updated_at|date:"d/m/Y" }}</span>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 10px 0;">
                        <span style="color: #888888; font-size: 14px;">Total Pagado:</span>
                        <span style="color: #10B981; font-size: 18px; font-weight: bold; float: right;">
                            ${{ order.final_price|floatformat:2 }} MXN
                        </span>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Completed Items -->
<h3 style="margin: 0 0 20px 0; color: #78B7D0; font-size: 18px;">Items Completados:</h3>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 30px;">
    {% for item in order.items.all %}
    <tr>
        <td style="padding: 15px; background-color: rgba(26, 26, 26, 0.3); border-bottom: 1px solid rgba(120, 183, 208, 0.2);">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td>
                        <span style="color: #10B981; font-size: 16px;">âœ“</span>
                        <span style="color: #F4E7E1; font-size: 15px; font-weight: 600; margin-left: 10px;">
                            {{ item.service.name }}
                        </span>
                    </td>
                    <td align="right">
                        <span style="color: #888888; font-size: 14px;">
                            Cantidad: {{ item.quantity }}
                        </span>
                    </td>
                </tr>
                {% if item.material or item.dimensions_length %}
                <tr>
                    <td colspan="2" style="padding-top: 5px; padding-left: 30px;">
                        <span style="color: #888888; font-size: 13px;">
                            {% if item.material %}Material: {{ item.material }}{% endif %}
                            {% if item.dimensions_length and item.dimensions_width %}
                            | {{ item.dimensions_length }} x {{ item.dimensions_width }} {{ item.dimensions_unit|default:"mm" }}
                            {% endif %}
                        </span>
                    </td>
                </tr>
                {% endif %}
            </table>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- Delivery/Pickup Info -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: rgba(120, 183, 208, 0.1); border-radius: 10px; border: 1px solid rgba(120, 183, 208, 0.3); padding: 20px; margin-bottom: 30px;">
    <tr>
        <td>
            <h4 style="margin: 0 0 15px 0; color: #78B7D0; font-size: 16px; text-align: center;">
                ðŸ“¦ InformaciÃ³n de Entrega
            </h4>
            <p style="margin: 0 0 10px 0; color: #F4E7E1; font-size: 14px; text-align: center; line-height: 1.6;">
                Tu pedido estÃ¡ listo para ser recogido en nuestras instalaciones o puede ser enviado a tu direcciÃ³n.
            </p>
            <p style="margin: 0; color: #888888; font-size: 13px; text-align: center;">
                Por favor contÃ¡ctanos para coordinar la entrega o recolecciÃ³n.
            </p>
        </td>
    </tr>
</table>

<!-- Quality Check -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: rgba(16, 185, 129, 0.05); border-radius: 10px; padding: 20px; margin-bottom: 30px;">
    <tr>
        <td style="text-align: center;">
            <p style="margin: 0; color: #10B981; font-size: 16px; font-weight: 600;">
                âœ¨ Control de Calidad Aprobado
            </p>
            <p style="margin: 10px 0 0 0; color: #F4E7E1; font-size: 14px; line-height: 1.6;">
                Todos los items han pasado nuestro riguroso control de calidad<br>
                y cumplen con los mÃ¡s altos estÃ¡ndares.
            </p>
        </td>
    </tr>
</table>

<!-- Feedback Request -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background: linear-gradient(135deg, rgba(120, 183, 208, 0.2) 0%, rgba(120, 183, 208, 0.1) 100%); border-radius: 10px; padding: 20px; margin-bottom: 30px;">
    <tr>
        <td style="text-align: center;">
            <p style="margin: 0 0 15px 0; color: #78B7D0; font-size: 16px; font-weight: 600;">
                Tu opiniÃ³n es importante para nosotros
            </p>
            <p style="margin: 0 0 20px 0; color: #F4E7E1; font-size: 14px;">
                Â¿CÃ³mo fue tu experiencia con AGAH Solutions?
            </p>
            <a href="{{ website_url|default:'http://localhost:5173' }}/contact" 
                style="display: inline-block; padding: 12px 30px; background-color: transparent; border: 2px solid #78B7D0; border-radius: 8px; color: #78B7D0; font-size: 14px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                Dejar Comentario
            </a>
        </td>
    </tr>
</table>

<!-- CTA Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 30px 0;">
    <tr>
        <td align="center">
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td style="padding-right: 10px;">
                        <a href="{{ website_url|default:'http://localhost:5173' }}/orders" 
                            style="display: inline-block; padding: 15px 30px; background-color: transparent; border: 2px solid #78B7D0; border-radius: 8px; color: #78B7D0; font-size: 16px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                            Ver Detalles
                        </a>
                    </td>
                    <td style="padding-left: 10px;">
                        <a href="{{ website_url|default:'http://localhost:5173' }}/services" 
                            style="display: inline-block; padding: 15px 30px; background-color: transparent; border: 2px solid #10B981; border-radius: 8px; color: #10B981; font-size: 16px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                            Nuevo Pedido
                        </a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Thank You -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="border-top: 1px solid rgba(120, 183, 208, 0.2); padding-top: 30px;">
    <tr>
        <td style="text-align: center;">
            <p style="margin: 0 0 10px 0; color: #10B981; font-size: 18px; font-weight: 600;">
                Â¡Gracias por tu confianza!
            </p>
            <p style="margin: 0; color: #888888; font-size: 14px; line-height: 1.6;">
                Esperamos volver a trabajar contigo pronto.
            </p>
        </td>
    </tr>
</table>
{% endblock %}