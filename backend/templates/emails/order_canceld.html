{% extends "emails/base_email.html" %}

{% block title %}Pedido Cancelado - AGAH Solutions{% endblock %}

{% block content %}
<!-- Cancel Icon -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="text-align: center; margin-bottom: 30px;">
    <tr>
        <td>
            <div style="display: inline-block; width: 80px; height: 80px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 50%; text-align: center; line-height: 80px;">
                <span style="font-size: 40px; color: white;">✕</span>
            </div>
        </td>
    </tr>
</table>

<!-- Main Message -->
<h2 style="margin: 0 0 20px 0; color: #ef4444; font-size: 28px; font-weight: 600; text-align: center;">
    Pedido Cancelado
</h2>

<p style="margin: 0 0 30px 0; color: #F4E7E1; font-size: 16px; line-height: 1.6; text-align: center;">
    Hola {{ customer_name|default:"Cliente" }}, confirmamos que tu pedido ha sido cancelado según lo solicitado.
</p>

<!-- Canceled Order Info -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: rgba(239, 68, 68, 0.1); border-radius: 10px; border: 1px solid rgba(239, 68, 68, 0.3); margin-bottom: 30px;">
    <tr>
        <td style="padding: 20px;">
            <h3 style="margin: 0 0 15px 0; color: #ef4444; font-size: 18px; text-align: center;">
                Pedido Cancelado: {{ order.order_number }}
            </h3>
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="padding: 8px 0; text-align: center;">
                        <span style="color: #888888; font-size: 14px;">Fecha de Cancelación:</span>
                        <span style="color: #F4E7E1; font-size: 14px; margin-left: 10px;">
                            {{ order.updated_at|date:"d/m/Y H:i" }}
                        </span>
                    </td>
                </tr>
                {% if cancellation_reason %}
                <tr>
                    <td style="padding: 8px 0; text-align: center;">
                        <span style="color: #888888; font-size: 14px;">Motivo:</span>
                        <span style="color: #F4E7E1; font-size: 14px; margin-left: 10px;">
                            {{ cancellation_reason }}
                        </span>
                    </td>
                </tr>
                {% endif %}
            </table>
        </td>
    </tr>
</table>

<!-- Canceled Items -->
<h3 style="margin: 0 0 20px 0; color: #78B7D0; font-size: 18px;">Items Cancelados:</h3>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 30px;">
    {% for item in order.items.all %}
    <tr>
        <td style="padding: 15px; background-color: rgba(26, 26, 26, 0.3); border-bottom: 1px solid rgba(120, 183, 208, 0.2);">
            <p style="margin: 0; color: #888888; font-size: 15px; text-decoration: line-through;">
                {{ item.service.name }} (x{{ item.quantity }})
            </p>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- What's Next -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: rgba(26, 26, 26, 0.3); border-radius: 10px; padding: 20px; margin-bottom: 30px;">
    <tr>
        <td>
            <h4 style="margin: 0 0 15px 0; color: #78B7D0; font-size: 16px;">¿Qué sigue?</h4>
            <ul style="margin: 0; padding-left: 20px; color: #F4E7E1; font-size: 14px; line-height: 1.8;">
                <li>Tu pedido ha sido eliminado de nuestro sistema de producción</li>
                <li>No se realizará ningún cargo adicional</li>
                <li>Puedes crear un nuevo pedido cuando lo desees</li>
            </ul>
        </td>
    </tr>
</table>

<!-- Feedback -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background: linear-gradient(135deg, rgba(120, 183, 208, 0.2) 0%, rgba(120, 183, 208, 0.1) 100%); border-radius: 10px; padding: 20px; margin-bottom: 30px;">
    <tr>
        <td style="text-align: center;">
            <p style="margin: 0 0 15px 0; color: #78B7D0; font-size: 16px; font-weight: 600;">
                Nos gustaría conocer tu opinión
            </p>
            <p style="margin: 0 0 20px 0; color: #F4E7E1; font-size: 14px; line-height: 1.6;">
                ¿Hubo algo que podríamos haber hecho mejor?<br>
                Tu feedback nos ayuda a mejorar nuestros servicios.
            </p>
            <a href="{{ website_url|default:'http://localhost:5173' }}/contact" 
                style="display: inline-block; padding: 12px 30px; background-color: transparent; border: 2px solid #78B7D0; border-radius: 8px; color: #78B7D0; font-size: 14px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                Enviar Comentarios
            </a>
        </td>
    </tr>
</table>

<!-- CTA Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 30px 0;">
    <tr>
        <td align="center">
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td style="padding-right: 10px;">
                        <a href="{{ website_url|default:'http://localhost:5173' }}/services" 
                            style="display: inline-block; padding: 15px 30px; background-color: transparent; border: 2px solid #78B7D0; border-radius: 8px; color: #78B7D0; font-size: 16px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                            Ver Servicios
                        </a>
                    </td>
                    <td style="padding-left: 10px;">
                        <a href="{{ website_url|default:'http://localhost:5173' }}/contact" 
                            style="display: inline-block; padding: 15px 30px; background-color: transparent; border: 2px solid #78B7D0; border-radius: 8px; color: #78B7D0; font-size: 16px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 1px;">
                            Contactar Soporte
                        </a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Sorry Message -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="border-top: 1px solid rgba(120, 183, 208, 0.2); padding-top: 30px;">
    <tr>
        <td style="text-align: center;">
            <p style="margin: 0 0 10px 0; color: #F4E7E1; font-size: 16px;">
                Lamentamos que hayas tenido que cancelar tu pedido
            </p>
            <p style="margin: 0; color: #888888; font-size: 14px;">
                Esperamos poder servirte en el futuro. ¡Hasta pronto!
            </p>
        </td>
    </tr>
</table>
{% endblock %}