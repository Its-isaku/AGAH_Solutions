{% extends "emails/base_email.html" %}

{% block title %}Cotización de Tu Pedido - AGAH Solutions{% endblock %}

{% block content %}
<!-- Greeting -->
<h2 style="margin: 0 0 20px 0; color: #F4E7E1; font-size: 24px; font-weight: 600;">
    Hola {{ customer_name|default:"Cliente" }},
</h2>

<p style="margin: 0 0 30px 0; color: #F4E7E1; font-size: 16px; line-height: 1.6;">
    ¡Excelentes noticias! Hemos revisado tu pedido y ya tenemos una cotización inicial para ti.
</p>

<!-- Order Info -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: rgba(120, 183, 208, 0.1); border-radius: 10px; border: 1px solid rgba(120, 183, 208, 0.3); margin-bottom: 30px;">
    <tr>
        <td style="padding: 20px;">
            <h3 style="margin: 0 0 15px 0; color: #78B7D0; font-size: 18px; text-align: center;">
                Pedido: {{ order.order_number }}
            </h3>
            <p style="margin: 0; color: #F4E7E1; font-size: 14px; text-align: center;">
                Estado: Cotizado
            </p>
        </td>
    </tr>
</table>

<!-- Estimated Price -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="background: linear-gradient(135deg, rgba(120, 183, 208, 0.2) 0%, rgba(120, 183, 208, 0.1) 100%); border-radius: 10px; border: 2px solid #78B7D0; margin-bottom: 30px;">
    <tr>
        <td style="padding: 30px; text-align: center;">
            <p style="margin: 0 0 10px 0; color: #F4E7E1; font-size: 18px;">Precio Estimado:</p>
            <p style="margin: 0; color: #78B7D0; font-size: 36px; font-weight: bold;">
                ${{ estimated_price|floatformat:2 }} MXN
            </p>
            <p style="margin: 15px 0 0 0; color: #888888; font-size: 13px; line-height: 1.5;">
                *Este precio puede variar según las especificaciones finales.<br>
                Te notificaremos si hay cambios significativos.
            </p>
        </td>
    </tr>
</table>

<!-- Order Details -->
<h3 style="margin: 0 0 20px 0; color: #78B7D0; font-size: 18px;">Detalles del Pedido:</h3>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 30px;">
    {% for item in order.items.all %}
    <tr>
        <td style="padding: 15px; background-color: rgba(26, 26, 26, 0.3); border-bottom: 1px solid rgba(120, 183, 208, 0.2);">
            <p style="margin: 0 0 8px 0; color: #F4E7E1; font-size: 16px; font-weight: 600;">
                {{ item.service.name }}
            </p>
            <p style="margin: 0; color: #888888; font-size: 14px;">
                Cantidad: {{ item.quantity }}
                {% if item.material %} | Material: {{ item.material }}{% endif %}
            </p>
            {% if item.dimensions_length and item.dimensions_width %}
            <p style="margin: 5px 0 0 0; color: #888888; font-size: 14px;">
                Dimensiones: {{ item.dimensions_length }} x {{ item.dimensions_width }}
                {% if item.dimensions_height %} x {{ item.dimensions_height }}